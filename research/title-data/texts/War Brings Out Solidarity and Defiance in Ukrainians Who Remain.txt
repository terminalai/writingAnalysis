KYIV, Ukraine — The historic center of Kyiv, usually bustling with tourists and souvenir stalls around its pastel-colored buildings and golden domed churches, is largely deserted these days. Shops and offices are closed, and the city, placed under curfew from 8 p.m., falls dark and silent at night.

Nearly half the population left the city through the first weeks of war in a chaotic exodus that blocked the roads and swamped the central train station. But just as many people remained — an estimated two million. Some stayed because they did not have the means to leave, or a place to go to, but others did so from a sense of patriotism or a newfound defiance in the face of the Russian invasion.

People were still out walking their dogs in a park by St. Andrew’s Church, above the Dnieper River on Sunday morning, even as the sound of heavy bombardment rolled like thunder from the northern suburbs of the city.

“I don’t want to leave,” said Galina Sizikova, 48, an architect who was walking her husky near the central St. Sophia’s Cathedral. “I have a lot of opportunities to do something to help.” Her daughters were grown up and had gone to stay with relatives in Vienna and she had stayed behind with her dog, Avrora.

She was spending her time sewing, making bulletproof vests for volunteers who have signed up to join the territorial defense forces. “A lot of friends went to fight,” she said. “My hobby is sewing so I went into production.”

The people who had stayed in the neighborhood had bonded, she said. “We became closer,” she said. “Even those who were not friendly before, we are together now. Some prepare food.”

The invasion has galvanized the population, fostering a unity that few had felt before; spawning enthusiasm for volunteering and solidarity for the men fighting, but also a stubborn refusal to be cowed by the invader.

“The Ukrainian people have been reborn,” said Oleg Sentsov, a filmmaker who was imprisoned in Russia for his opposition to the annexation of the Crimea peninsula from Ukraine in 2014. Mr. Sentsov said he evacuated his family to western Ukraine and joined the territorial defense within a day of the invasion, and he has already been serving in the suburbs of Kyiv.

“Of course the war is terrible,” he said, “and many people are dying but there is a feeling that our nation is being born and our connections to Russia are being cut.”

The day after a missile smashed into the yard of their apartment building on the north side of the city, an army of volunteers turned out with brooms and dumpster trucks to clean up the debris.

Three volunteers were helping Viktor Chernyatevich, 75, sweep up the shattered glass in his fifth-floor apartment. He escaped by a miracle as he was standing in his hallway at 8.01 a.m. when the missile struck, but his apartment caught the full brunt of the explosion, its balcony sheared off and his belongings were wrecked.

He had sent his daughter and grandchildren to take refuge in Poland in the first days of the war, but like many working-class Ukrainians he stayed to guard his property.

“Who would be here to turn off the water and gas?” Mr. Chernyatevich said. Even after the damage from the explosion, he said he would remain in the apartment and had canvas ready to cover the shattered windows. “I was a construction worker, I can do these things,” he said.

His neighbors said they would stay as well. “We are rooted in Kyiv, married for 38 years,” said Frida Maslovska, 71, standing at her door wrapped in a woolen scarf and hat. The explosion shook the walls like an earthquake, she said, but her husband was opposed to leaving. “He says we should support people,” she said. Asked what she wanted, she smiled and answered, “I would like to live here, in my apartment, my ugly apartment.”

Mr. Chernyatevich was one of the few prepared to contemplate a long, grim war.

“The longer it goes on, the more Ukrainians will lose, and the more Russians will lose,” he said. “And then we will come to a solution and say, ‘Why do we have a war?’”

At the site of another missile strike where firefighters had to evacuate people from a burning building, the mayor, Vitali Klitschko, said people had refused his offer to evacuate them to safety and asked for weapons instead. A former world heavyweight boxing champion, Mr. Klitschko said that the Russian airstrikes were creating more anger in the population.

“Nobody feels safe right now in the whole Ukraine, not just in the capital,” he said, “but I tell you, right now, people don’t want to leave,” he said. “And those people do not just want to stay in Kyiv. They are ready to defend our city.”

For days volunteers and security forces have been rescuing people from the northern suburbs of Kyiv that are under bombardment, ferrying them to checkpoints on the edge of the city where buses take them to overnight shelters.

Disheveled, eyes staring with shock, they described a harrowing ordeal of living for days without water, electricity and heating, with diminishing food supplies as mortar and artillery fire landed closer.

“We should have left in the first days,” said Valentin Tkachenko, 67, who was evacuated on Thursday with his wife, teenage children and a neighbor.

“No one thought it would be so bad. They said it would take a while for Russian troops to come.”

Beside him, a pensioner sat nodding happily as she ate her way through thick slices of bread handed her by a volunteer. Another woman said she had not wanted to leave because she owned a dog and 11 cats. Eventually, she was forced to go and left the animals behind.

Many of those rescued from Irpin, Bucha and other war-torn suburbs in recent days have been old and infirm, some barely able to walk unaided, an indication that a large percentage of those who remain in the capital may not have the means or ability to escape. Pensioners are often out in the streets, waiting in line at the banks to draw their pension payments, or shopping at grocery stores.

Kyiv has not suffered the same level of destruction of some of Ukraine’s cities — such as Kharkiv, Mariupol, Chernihiv and Mykolaiv — and some residents said they were confident that the city had good air defenses, but Russian attacks have been increasing. Two cruise missiles seemed to pierce the defense system, causing devastating damage in two districts last week, and others have been intercepted but the remnants have killed people and damaged buildings where they fell.

The Kyiv City Council announced last week that 228 people have died and more than 900 have been wounded in three weeks of war in the capital. Four of the dead were children.

“It’s not a good joke, but it’s absolutely like Russian roulette,” said Vyacheslav Ostapenko, 55, who works for a Ukrainian TV network, Channel 5. He and his partner, Iryna Popova, a puppeteer and author of children's stories, are among the many middle-class professionals who chose to stay in Kyiv.

Mr. Ostapenko said his parents and sister, a documentary film director, were also still in Kyiv, one of his reasons to stay. The couple had spent three weeks sleeping in the corridor, away from the windows, so they had avoided injury but the apartment was no longer safe.

“I want to stay in Ukraine but the question now is where?” he said.